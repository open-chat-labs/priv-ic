type AttributeId = nat;
type TimestampMillis = nat64;

type App =
    record {
        domain_name: text;
    };

type PhoneNumber = 
    record {
        country_code: nat16;
        number: text;
    };

type Identity = 
    record {
        email: EmailFacet;
        phone: PhoneFacet;
    };

type EmailFacet = 
    record {
        addresses: vec VerifiableEmailAddress;
    };

type PhoneFacet = 
    record {
        numbers: vec VerifiablePhoneNumber;
    };

type VerificationCodeStatus =
    variant {
        Sent: TimestampMillis;
        Expired: TimestampMillis;
        Verified: TimestampMillis;
    };

type VerifiableEmailAddress =
    record {
        id: AttributeId;
        status: VerificationCodeStatus;
        added: TimestampMillis;
        value: text;
    };

type VerifiablePhoneNumber =
    record {
        id: AttributeId;
        status: VerificationCodeStatus;
        added: TimestampMillis;
        value: PhoneNumber;
    };

type AppEmailAddress = 
    record {
        value: text;
        verified: bool;
    };

type AppEmailFacet = 
    record {
        any_verified: bool;
        addresses: vec AppEmailAddress;
    };

type AppPhoneFacet = 
    record {
        any_verified: bool;
        numbers: vec AppPhoneNumber;
    };    

type AppPhoneNumber = 
    record {
        value: text;
        verified: bool;
    };

type IndexedVerificationCode =
    record {
        index: nat64;
        value: VerificationCode;
    };

type VerificationCode =
    record {
        code: text;
        target: VerificationCodeTarget;
    };

type VerificationCodeTarget =
    variant {
        Phone: text;
        Email: text;
    };
